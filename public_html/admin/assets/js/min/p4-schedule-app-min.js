$(document).ready(function(){var e={left:"today prev,next ",center:"title",right:"month,agendaWeek,agendaDay"},t=new Date,d=t.getMonth(),a=t.getFullYear(),l=["January","February","March","April","May","June","July","August","September","October","November","December"],c=null,n=null,s=null,u=$("#calendar").fullCalendar({header:e,selectable:!0,selectHelper:!0,droppable:!1,draggable:!1,select:function(e,t,d){c=e;var a=new Date(e),l=a.getFullYear(),s=a.getDate(),o=a.getMonth()+1;10>s&&(s="0"+s),10>o&&(o="0"+o),n=l+"-"+o+"-"+s,$("#add_schedule_label").text("Add the events for "+o+"/"+s+"/"+l),$("#add_schedule_events").val(""),$("#add_schedule_modal").modal("show"),u.fullCalendar("unselect")},eventRender:function(e,t,d){$(t).find(".fc-event-title").attr("data-schedule-id",e.schedule_id)},eventClick:function(e,t,d){s=$(t.currentTarget).find(".fc-event-title"),$("#edit_schedule_modal").attr("data-schedule-id",e.schedule_id),$("#edit_schedule_events").text(e.title),$("#edit_schedule_modal").modal("show")},eventStartEditable:!1,editable:!1,events:[]});$.ajax({url:SUBSCRIBER_API+"/schedules?token="+$.cookie("access_token"),method:"GET",success:function(e){$(e).each(function(){u.fullCalendar("renderEvent",{title:this.schedule_events,start:this.schedule_date,schedule_id:this.schedule_id,allDay:!0},!0)})}}),$("#edit_schedule_button").click(function(){var e=$("#edit_schedule_modal").attr("data-schedule-id"),t=$("#edit_schedule_events").val(),d={schedule:{schedule_id:e,events:t}};$.ajax({dataType:"json",url:SUBSCRIBER_API+"/editschedule?token="+$.cookie("access_token"),method:"POST",data:d,success:function(e){$("#edit_schedule_modal").modal("hide"),$(s).text(t)}})}),$("#delete_schedule_button").click(function(){var e=$("#edit_schedule_modal").attr("data-schedule-id");$.ajax({dataType:"json",url:SUBSCRIBER_API+"/schedule/"+e+"/delete?token="+$.cookie("access_token"),method:"GET",success:function(e){$("#edit_schedule_modal").modal("hide"),$(s).closest(".fc-event").remove()}})}),$("#add_schedule_button").click(function(){var e=$("#add_schedule_events").val();$.ajax({dataType:"json",url:SUBSCRIBER_API+"/addschedule?token="+$.cookie("access_token"),method:"POST",data:{schedule:{date:n,events:e}},success:function(t){"ok"==t.status&&(u.fullCalendar("renderEvent",{title:e,start:c,allDay:!0},!0),$("#add_schedule_modal").modal("hide"))}})})});