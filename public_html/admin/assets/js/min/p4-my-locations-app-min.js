$(document).ready(function(){function o(o){o="undefined"!=typeof o?o:!0,i=new Array,e.rows().remove(),n.removeMarkers(),$.ajax({method:"GET",url:SUBSCRIBER_API+"/locations?token="+$.cookie("access_token"),success:function(a){$(a).each(function(){e.row.add(["remove",this.location_name,this.location_address,this.location_id]),i.push(this)}),e.draw(),t(i,o)}})}function a(a){$.ajax({dataType:"json",url:SUBSCRIBER_API+"/removelocation",method:"POST",data:{location:{location_id:a}},success:function(a){o(!1)}})}function t(o,a){a="undefined"!=typeof a?a:!0,$(o).each(function(){var o=this,t=o.location_name,e=o.location_lat,i=o.location_long,c=o.location_address,l=o.location_id,r="";r+="<h5>"+t+"</h5>",r+="<p>"+c+"</p>",r+="<button class='btn btn-danger btn-block remove_location' data-location-id='"+l+"'>Remove</button>",a?n.addMarker({lat:e,lng:i,title:t,infoWindow:{content:r},animation:google.maps.Animation.DROP}):n.addMarker({lat:e,lng:i,title:t,infoWindow:{content:r}})})}var n=null,e=null,i=new Array,c=40.75,l=-111.8833;n=new GMaps({div:"#location_map_container",lat:c,lng:l,zoom:11}),e=$("#data-table").DataTable({deferRender:!0,dom:"frtiS",scrollY:320,scrollCollapse:!0,columnDefs:[{targets:0,width:"100px",render:function(o,a,t,n){return"<a href='javascript:;' class='remove_location' data-location-id='"+t[3]+"'>Remove Location</a>"}},{targets:3,visible:!1}]}),o(),$("#data-table").on("click",".remove_location",function(){var o=$(this).attr("data-location-id");a(o)}),$("#location_map_container").on("click",".remove_location",function(){var o=$(this).attr("data-location-id");a(o)})});