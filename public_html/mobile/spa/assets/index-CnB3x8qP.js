import{a as je,r as s,b as N,g as ye,u as be,i as $,j as t,s as z,M as Le,c as F,T as Ce,I as b,d as L,A as Se,e as Re,f as Y,h as _e,L as ke,k as Me,l as Ie,B as Pe,m as Te,H as De,n as Ae,o as Oe,p as Ee,q as Be}from"./mui-DFWYaBLm.js";import{u as G,N as Ne,a as ae,O as le,L as $e,R as ze,b as y,H as Fe}from"./react-HEUYN9SA.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var E={},Z=je;E.createRoot=Z.createRoot,E.hydrateRoot=Z.hydrateRoot;function Ge(e={}){const{nonce:r,onScriptLoadSuccess:n,onScriptLoadError:a}=e,[i,o]=s.useState(!1),l=s.useRef(n);l.current=n;const u=s.useRef(a);return u.current=a,s.useEffect(()=>{const c=document.createElement("script");return c.src="https://accounts.google.com/gsi/client",c.async=!0,c.defer=!0,c.nonce=r,c.onload=()=>{var f;o(!0),(f=l.current)===null||f===void 0||f.call(l)},c.onerror=()=>{var f;o(!1),(f=u.current)===null||f===void 0||f.call(u)},document.body.appendChild(c),()=>{document.body.removeChild(c)}},[r]),i}const ce=s.createContext(null);function He({clientId:e,nonce:r,onScriptLoadSuccess:n,onScriptLoadError:a,children:i}){const o=Ge({nonce:r,onScriptLoadSuccess:n,onScriptLoadError:a}),l=s.useMemo(()=>({clientId:e,scriptLoadedSuccessfully:o}),[e,o]);return N.createElement(ce.Provider,{value:l},i)}function qe(){const e=s.useContext(ce);if(!e)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return e}function Ve(e){var r;return(r=e==null?void 0:e.clientId)!==null&&r!==void 0?r:e==null?void 0:e.client_id}const We={large:40,medium:32,small:20};function Ke({onSuccess:e,onError:r,useOneTap:n,promptMomentNotification:a,type:i="standard",theme:o="outline",size:l="large",text:u,shape:c,logo_alignment:f,width:g,locale:x,click_listener:d,containerProps:h,...w}){const m=s.useRef(null),{clientId:U,scriptLoadedSuccessfully:J}=qe(),X=s.useRef(e);X.current=e;const C=s.useRef(r);C.current=r;const Q=s.useRef(a);return Q.current=a,s.useEffect(()=>{var S,R,_,k,M,I,P,T,D;if(J)return(_=(R=(S=window==null?void 0:window.google)===null||S===void 0?void 0:S.accounts)===null||R===void 0?void 0:R.id)===null||_===void 0||_.initialize({client_id:U,callback:p=>{var v;if(!(p!=null&&p.credential))return(v=C.current)===null||v===void 0?void 0:v.call(C);const{credential:j,select_by:we}=p;X.current({credential:j,clientId:Ve(p),select_by:we})},...w}),(I=(M=(k=window==null?void 0:window.google)===null||k===void 0?void 0:k.accounts)===null||M===void 0?void 0:M.id)===null||I===void 0||I.renderButton(m.current,{type:i,theme:o,size:l,text:u,shape:c,logo_alignment:f,width:g,locale:x,click_listener:d}),n&&((D=(T=(P=window==null?void 0:window.google)===null||P===void 0?void 0:P.accounts)===null||T===void 0?void 0:T.id)===null||D===void 0||D.prompt(Q.current)),()=>{var p,v,j;n&&((j=(v=(p=window==null?void 0:window.google)===null||p===void 0?void 0:p.accounts)===null||v===void 0?void 0:v.id)===null||j===void 0||j.cancel())}},[U,J,n,i,o,l,u,c,f,g,x]),N.createElement("div",{...h,ref:m,style:{height:We[l],...h==null?void 0:h.style}})}var H={},A={};const Ue=ye(be);var ee;function q(){return ee||(ee=1,function(e){"use client";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=Ue}(A)),A}var Je=$;Object.defineProperty(H,"__esModule",{value:!0});var de=H.default=void 0,Xe=Je(q()),te=t;de=H.default=(0,Xe.default)([(0,te.jsx)("path",{d:"M6.41 6 5 7.41 9.58 12 5 16.59 6.41 18l6-6z"},"0"),(0,te.jsx)("path",{d:"m13 6-1.41 1.41L16.17 12l-4.58 4.59L13 18l6-6z"},"1")],"KeyboardDoubleArrowRight");var V={},Qe=$;Object.defineProperty(V,"__esModule",{value:!0});var ue=V.default=void 0,Ye=Qe(q()),O=t;ue=V.default=(0,Ye.default)([(0,O.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,O.jsx)("path",{d:"M13.54 8.97c-.23-.47-.76-.71-1.26-.53L9 9.65V12h1v-1.65l1.54-.57-.96 4.89-2.78-.57-.2.98 3.76.77.52-2.64L13 14.42V18h1v-3.97l-1.32-1.44.41-2.35C13.99 11.46 15.3 12 16 12v-1c-.41 0-1.63-.33-2.46-2.03"},"1"),(0,O.jsx)("circle",{cx:"13.5",cy:"7",r:"1"},"2")],"RunCircleOutlined");const Ze=z(Le,{shouldForwardProp:e=>e!=="open"})(({theme:e,open:r})=>({transition:e.transitions.create(["width","margin"],{duration:e.transitions.duration.leavingScreen,easing:e.transitions.easing.sharp}),zIndex:e.zIndex.drawer+1,...r&&{marginLeft:re,transition:e.transitions.create(["width","margin"],{duration:e.transitions.duration.enteringScreen,easing:e.transitions.easing.sharp}),width:`calc(100% - ${re}px)`}})),re=276,fe={authenticated:!1,jwtToken:null,logout:()=>Promise.resolve(),onLogin:async()=>Promise.resolve(),user:null},pe={setTitle:()=>{},title:""},he=s.createContext(fe),et=({children:e})=>{const r=G(),[n,a]=s.useState(!1),[i,o]=s.useState(null),[l,u]=s.useState(null),c=async g=>{const x=new Headers;return x.append("token",g),fetch("https://api.promote4.me/spa/token",{headers:x,method:"POST"}).then(d=>d.json()).then(d=>{console.info(d),o(d.jwt),u(d.user);const h=d.user.subscriberRelationships.find(w=>w.status==="ACTIVE");if(d.hasUserAccount&&d.hasSubscriberRelationships&&h){a(!0),r("/");return}if(!d.hasUserAccount){r(`/register${d.added?"":"?hasVisited=true"}`);return}r("/request-subscriber-access")}).catch(d=>{console.error(d)})},f=()=>(a(!1),o(null),u(null),r("/login"),Promise.resolve());return t.jsx(he.Provider,{value:{authenticated:n,jwtToken:i,logout:f,onLogin:c,user:l},children:e})},W=()=>{try{return s.useContext(he)}catch(e){return console.warn(e),fe}},tt=({open:e,setOpen:r})=>{const{user:n,authenticated:a,logout:i}=W(),[o,l]=s.useState(null),{palette:u}=F(),c=G(),f=()=>{c("/")},g=()=>{r(!0)},x=()=>{l(null)},d=()=>{i().catch(m=>{console.error(m)})},h=m=>{l(m.currentTarget)},w=()=>{c("/profile")};return t.jsx(Ze,{open:e,position:"fixed",children:t.jsxs(Ce,{style:{flexDirection:"row",justifyContent:e?"end":"space-between"},children:[t.jsx(b,{color:"inherit","aria-label":"open drawer","data-testid":"drawerIcon",onClick:g,edge:"start",sx:{marginRight:5,...e&&{display:"none"}},children:t.jsx(de,{sx:{color:u.common.white}})}),e?t.jsx(t.Fragment,{}):t.jsxs(b,{"aria-label":"menu",disableFocusRipple:!0,disableRipple:!0,disableTouchRipple:!0,"data-testid":"menu",onClick:f,size:"large",sx:{color:u.common.white,gap:2},children:[t.jsx(ue,{sx:{color:u.common.white}}),t.jsx(L,{variant:"h5",children:"Promote4Me"})]}),a?t.jsxs("div",{children:[t.jsx(b,{"aria-controls":"menu-appbar","aria-haspopup":"true","aria-label":"account of current user",color:"inherit",onClick:h,size:"large",children:a?t.jsx("img",{src:n.picture,width:24,height:24,style:{borderRadius:"40%",overflow:"hidden",display:"inline-block",verticalAlign:"middle"}}):t.jsx(Se,{sx:{color:u.common.white}})}),t.jsxs(Re,{anchorEl:o,anchorOrigin:{horizontal:"right",vertical:"top"},id:"menu-appbar","data-testid":"menu-appbar",keepMounted:!0,onClose:x,open:!!o,transformOrigin:{horizontal:"right",vertical:"top"},children:[t.jsx(Y,{onClick:w,children:"Profile"}),t.jsx(Y,{onClick:d,children:"Logout"})]})]}):t.jsx(t.Fragment,{})]})})};var K={},rt=$;Object.defineProperty(K,"__esModule",{value:!0});var xe=K.default=void 0,nt=rt(q()),ne=t;xe=K.default=(0,nt.default)([(0,ne.jsx)("path",{d:"M17.59 18 19 16.59 14.42 12 19 7.41 17.59 6l-6 6z"},"0"),(0,ne.jsx)("path",{d:"m11 18 1.41-1.41L7.83 12l4.58-4.59L11 6l-6 6z"},"1")],"KeyboardDoubleArrowLeft");const ot=z(_e,{shouldForwardProp:e=>e!=="open"})(({theme:e,open:r})=>({boxSizing:"border-box",flexShrink:0,whiteSpace:"nowrap",width:ve,...r&&{...oe(e),"& .MuiDrawer-paper":oe(e)},...!r&&{...ie(e),"& .MuiDrawer-paper":ie(e)}})),oe=e=>({overflowX:"hidden",transition:e.transitions.create("width",{duration:e.transitions.duration.enteringScreen,easing:e.transitions.easing.sharp}),width:ve}),ie=e=>({overflowX:"hidden",transition:e.transitions.create("width",{duration:e.transitions.duration.leavingScreen,easing:e.transitions.easing.sharp}),width:`calc(${e.spacing(7)} + 1px)`,[e.breakpoints.up("sm")]:{width:`calc(${e.spacing(8)} + 1px)`}}),ve=276,it=z("div")(({theme:e})=>({alignItems:"center",display:"flex",justifyContent:"flex-end",padding:e.spacing(0,1),...e.mixins.toolbar})),B=s.forwardRef(({href:e,...r},n)=>t.jsx(Ne,{ref:n,to:e,...r})),st=({href:e,icon:r,sx:n,text:a})=>t.jsxs(ke,{LinkComponent:B,href:e,sx:n,children:[t.jsx(Me,{children:r}),t.jsx(Ie,{primary:a})]}),at=()=>t.jsx(Pe,{role:"presentation",sx:{"& .MuiListItemIcon-root":{color:"rgb(188, 183, 174)"}},children:t.jsx(Te,{className:"links-list",component:"nav",children:t.jsx(st,{href:"/",icon:t.jsx(De,{}),text:"Home"})})}),lt=500,ct=({open:e,setOpen:r})=>{const n=F(),a=G();s.useEffect(()=>{const l=()=>{r(window.innerWidth>lt)};return window.addEventListener("resize",l),()=>{window.removeEventListener("resize",l)}},[]);const i=()=>{r(!1)},o=()=>{a("/")};return t.jsxs(ot,{className:"drawer-component",open:e,variant:"permanent",children:[t.jsxs(it,{className:"drawer-header",style:{backgroundColor:n.palette.primary.main},children:[e?t.jsxs(b,{"aria-label":"menu",disableFocusRipple:!0,disableRipple:!0,disableTouchRipple:!0,onClick:o,size:"large",sx:{color:n.palette.common.white,gap:2},children:[t.jsx(Ae,{sx:{color:n.palette.common.white}}),t.jsx(L,{variant:"h5",children:"Promote4Me"})]}):t.jsx(t.Fragment,{}),e?t.jsx(b,{"data-testid":"NavToggleButton",onClick:i,children:t.jsx(xe,{sx:{color:n.palette.common.white},"data-testid":"NavCollapseIcon"})}):t.jsx(t.Fragment,{})]}),t.jsx(at,{open:e})]})},dt=()=>{const[e,r]=s.useState(!1),{authenticated:n}=W();return n?t.jsxs("div",{style:{display:"flex",flexGrow:1,flexDirection:"column",marginTop:64},children:[t.jsx(tt,{open:e,setOpen:r}),t.jsxs("div",{style:{display:"flex",flexGrow:1,flexDirection:"row"},children:[t.jsx(ct,{open:e,setOpen:r}),t.jsx("div",{style:{display:"flex",flexGrow:1,flexDirection:"row",padding:16},children:t.jsx(le,{})})]})]}):t.jsx(ae,{to:"/login"})},ut=()=>t.jsx("div",{style:{display:"flex",flexDirection:"column",flexGrow:1,marginTop:64},children:t.jsx("div",{style:{display:"flex",flexDirection:"row",flexGrow:1},children:t.jsx("div",{style:{display:"flex",flexDirection:"row",flexGrow:1,justifyContent:"center",padding:16},children:t.jsx(le,{})})})}),ge=s.createContext(pe),ft=({children:e})=>{const[r,n]=s.useState("");return s.useEffect(()=>{window.document.title=r},[r]),t.jsx(ge.Provider,{value:{setTitle:n,title:r},children:e})},me=()=>{try{return s.useContext(ge)}catch(e){return console.warn(e),pe}},pt=()=>{const{authenticated:e,onLogin:r}=W(),{setTitle:n}=me();if(s.useEffect(()=>{n("Login")},[n]),e)return t.jsx(ae,{to:"/"});const a=()=>{console.error("Login Failed")},i=o=>{if(!o.credential){console.warn("Missing JWT, cannot login");return}r(o.credential).then(()=>{}).catch(()=>{})};return t.jsx("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",padding:16},children:t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16,justifyContent:"center",maxWidth:480},children:[t.jsx(L,{align:"center",variant:"h3",children:"Login"}),t.jsx(Ke,{onError:a,onSuccess:i})]})})},ht=()=>{const{palette:e}=F(),{setTitle:r}=me();return s.useEffect(()=>{r("Not Found")},[r]),t.jsxs("div",{children:[t.jsx(L,{children:"Not Found"}),t.jsx(Oe,{component:$e,style:{borderColor:e.primary.main,borderRadius:8,borderStyle:"solid",borderWidth:1,padding:16,textDecoration:"none"},to:"/",children:"Home"})]})},se="#080402",xt="#fd7e23",vt=Ee({components:{MuiButtonBase:{defaultProps:{LinkComponent:B}},MuiInput:{defaultProps:{color:"primary"},styleOverrides:{input:{color:"#fff"}}},MuiLink:{defaultProps:{component:B}},MuiMenu:{styleOverrides:{paper:{backgroundColor:se}}},MuiPaper:{styleOverrides:{root:{backgroundColor:se,color:"rgb(188, 183, 174)"}}},MuiSvgIcon:{defaultProps:{color:"primary"}}},typography:{allVariants:{color:"#fff"}},palette:{primary:{main:xt}}}),gt=()=>t.jsx(Be,{theme:vt,children:t.jsx(He,{clientId:"827056583868-lkgladofkkn2lf8n4afsipuno1k2bavj.apps.googleusercontent.com",children:t.jsxs(ze,{children:[t.jsx(y,{element:t.jsx(dt,{}),path:"/",children:t.jsx(y,{element:t.jsx("div",{children:t.jsx(L,{children:"Home"})}),path:"/"})}),t.jsxs(y,{element:t.jsx(ut,{}),path:"/",children:[t.jsx(y,{element:t.jsx(pt,{}),path:"login"}),t.jsx(y,{element:t.jsx(ht,{}),path:"*"})]})]})})});E.createRoot(document.getElementById("root")).render(t.jsx(N.StrictMode,{children:t.jsx(Fe,{children:t.jsx(et,{children:t.jsx(ft,{children:t.jsx(gt,{})})})})}));
